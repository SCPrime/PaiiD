# Backend Module - SonarCloud Configuration
# Python 3.11 + FastAPI

# Module identification
sonar.projectKey=SCPrime_PaiiD:backend
sonar.projectName=PaiiD Backend
sonar.projectVersion=1.0.0

# Source directories
sonar.sources=app
sonar.tests=tests

# Language settings
sonar.language=py
sonar.python.version=3.11

# Python coverage settings
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.xunit.reportPath=test-results.xml

# Backend-specific exclusions
sonar.exclusions=\
  **/__pycache__/**,\
  **/*.pyc,\
  **/*.pyo,\
  **/*.pyd,\
  **/migrations/**,\
  **/alembic/versions/**,\
  **/.venv/**,\
  **/venv/**,\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py,\
  **/conftest.py

# Test file patterns
sonar.test.inclusions=\
  **/tests/**/*.py,\
  **/*_test.py,\
  **/test_*.py

# Code duplication threshold
sonar.cpd.exclusions=\
  **/tests/**,\
  **/migrations/**

# Ignore certain patterns for FastAPI
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore unused parameter warnings in FastAPI dependency injection
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1172
sonar.issue.ignore.multicriteria.e1.resourceKey=**/routers/*.py

# Ignore complexity warnings in main.py (startup config)
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/main.py

# Ignore broad exception catching in error handlers
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S112
sonar.issue.ignore.multicriteria.e3.resourceKey=**/middleware/*.py
